{% extends "base.html" %}

{% load static %}

{% block style %}
<link rel="stylesheet" href="{% static 'css/cameradata_detail.css' %}">
{% endblock %}

{% block content %}
<h1>Patient: {{ cameradata.patient }} </h1>
<p>Session Time: {{ cameradata.time }}</p>

<!-- VideoFrame Object -->
<script src="https://rawgit.com/allensarkisyan/VideoFrame/master/VideoFrame.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>

<div class="videoFrame">
  <video
    name="{{ cameradata.patient }} - {{ cameradata.time }}"
    align="left" 
    height="50%"
    width="100%" 
    id="video" 
    src="{{ media_url }}{{ cameradata.filename }}" 
    type="video/mp4"
  ></video>

  <div id="controls" class="videoControls">
    <div class="playControls" style="margin:10px 0px 0px 0px">
      <button id="play-pause" class="controlButton">Play</button>
      <input type="range" id="seek-bar" min="0" value="0" step="1" style="width:50%">
      <span id="videoTime">00:00</span> / <span id="videoDuration">00:00</span>
      <button id="mute"  class="controlButton">Mute</button>
      <input type="range" id="volume-bar" min="0" max="1" step="0.1" value="1" style="width:10%"></input>
    </div>
    <div class="seekControls" style="margin:10px 0px 0px 0px">
      <button id="rewind-video" class="controlButton"><i class="material-icons">replay</i></button>
      <button id="seek-backward" class="controlButton"><i class="material-icons">skip_previous</i></button>
      <span class="selectBox">
        <select id="backward-increment" class="dropDown">
          <option value="f1">1</option>
          <option value="f5">5</option>
          <option value="f10">10</option>
          <option value="f25">25</option>
          <option value="f50">50</option>
        </select>
      </span>
      <button id="seek-forward" class="controlButton"><i class="material-icons">skip_next</i></button>
      <span class="selectBox">
        <select id="forward-increment" class="dropDown">
          <option value="b1">1</option>
          <option value="b5">5</option>
          <option value="b10">10</option>
          <option value="b25">25</option>
          <option value="b50">50</option>
        </select>
      </span>
      <button id="annotate" class="controlButton"><i class="material-icons">edit_location</i></button>
      <span class="selectBox">
        <select id="annotation-list" class="dropDown" style="width:110px">
          {% for label in cameraannotation_list %}
          print(label)
          {% endfor %}

          {% comment %} 
          <option value="a1">prone sup</option>
          <option value="a2">b</option>
          <option value="a3">c</option>
          <option value="a4">d</option>
          <option value="a5">e</option> 
          {% endcomment %}

        </select>
      </span>
      <input type="text" name="other-annotation" class="otherText">
    </div>
  </div>
</div>

<div class="frame">
  <br>
  Current Frame: <span id="currentFrame">0</span>
  <br>
  Current Time (hh:mm:ss:ff): <span id="currentTime">00:00:00:00</span>
</div>

<!-- Camera Annotation List -->
<div style="margin-left:20px;margin-top:20px">
  <h4>Camera Annotations</h4>
  <ul>
    {% for annotation in cameradata.cameraannotation_set.all %}
    <li><a href="{% url 'cameraannotation-detail' cameradata.id annotation.id %}">{{annotation.timestamp}} - {{annotation.get_annotation_display}}</a></li>
    {% endfor %}
  </ul>
</div>
{% endblock %}

{% block javascript %}
<script type="text/javascript" src="{% static 'js/cameradata_detail.js' %}"></script>
{% endblock %}
