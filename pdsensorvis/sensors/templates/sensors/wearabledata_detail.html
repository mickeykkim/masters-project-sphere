{% extends "base.html" %}

{% block title %}<title>Bristol Sphere PD Sensors - Wearable Data</title>{% endblock %}

{% load static %}

{% block style %}
<link rel="stylesheet" href="{% static 'css/data_detail.css' %}">
{% endblock %}

{% block jquery %}
var ctx = document.getElementById('myChart').getContext('2d');
var myChart = new Chart(ctx, {
   type: 'line',
   data: {
      labels: ['1', '2', '3', '4', '5', '6'],
      datasets: [{
         label: '',
         data: [12, 19, 3, 5, 2, 3],
         backgroundColor: [
            'rgba(255, 99, 132, 0.2)',
         ],
         borderColor: [
            'rgba(255, 99, 132, 1)',
         ],
         borderWidth: 1
      }]
   },
   options: {
      responsive: true,
      title: {
         display: true,
         text: 'Wearable Data Graph'
      },
      tooltips: {
         mode: 'index',
         intersect: false,
      },
      hover: {
         mode: 'nearest',
         intersect: true
      },
      scales: {
         xAxes: [{
            display: true,
            scaleLabel: {
               display: true,
               labelString: 'Frame'
            }
         }],
         yAxes: [{
            display: true,
            scaleLabel: {
               display: true,
               labelString: 'Average Magnitude'
            }
         }]
      }
   }
});
{% endblock %}

{% block content %}
<h1>Patient: {{ wearabledata.patient }} </h1>
<p>Session Time: <em>{{ wearabledata.time }}</em> | Note: <em>{{ wearabledata.note }}</em></p>
<hr>
<h1>Wearable Data Visualization</h1>
<canvas id="myChart" width="500" height="400"></canvas>
<hr>
<div style="margin-left:20px;margin-top:20px">
  <h4>Wearable Annotations <button id="export_all" class="controlButtonS"><i class="material-icons">save_alt</i></button>
      <select id="download-format" class="downloadFormatDropDown" data-toggle="tooltip" data-placement="bottom"
        data-trigger="hover" title="Download format">
        <option value="1">Excel (.xls)</option>
        <option value="2">Subtitle (.srt)</option>
        <option value="3">Comma-separated Values (.csv)</option>
        <option value="4">Tab-delimited Text (.txt)</option>
      </select>
  </h4>
  <ul>
    {% for annotation in wearabledata.wearableannotation_set.all %}
      <li><a href="{% url 'wearableannotation-detail' wearabledata.id annotation.id %}">{{annotation.timestamp}} - {{annotation.get_annotation_display}}</a></li>
    {% endfor %}
  </ul>
</div>
{% endblock %}