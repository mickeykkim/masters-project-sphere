{% extends "base.html" %}

{% block content %}
  <div class="titleText">
    <h1>Patient: {{ patientdata }}</h1>
    {% if perms.sensors.can_alter_patientdata %}
      <button id="edit" class="titleButton controlButtonXL" data-toggle="tooltip" data-placement="bottom" data-trigger="hover"
            title="Edit Patient Data"><i class="material-icons buttonIconS">create</i> Edit</button>
    {% endif %}
  </div>
  <hr>
  <p><strong>Last Name: </strong>{{ patientdata.last_name }}</p>
  <p><strong>First Name: </strong>{{ patientdata.first_name }}</p>
  <p><strong>Date of Birth: </strong>{{ patientdata.date_of_birth }}</p>
  <p><strong>Notes: </strong>{{ patientdata.notes }}</p>

  <div style="margin-left:20px;margin-top:40px">
    <div class="titleText">
      <h4>Wearable Data Session History</h4>
      {% if perms.sensors.can_alter_wearabledata %}
        <button type='button' class="createNewSessionButton controlButtonXL" data-toggle="tooltip" data-placement="bottom" data-trigger="hover"
                title="Create Wearable Data" onclick='window.location.href="{% url 'create_wearabledata' patientdata.id %}"'>
          <i class="material-icons buttonIconS">add</i> Create New
        </button>
      {% endif %}
    </div>
    {% for wearable in patientdata.wearables.all %}
      <hr>
      <p><strong>Session: </strong><a href="{% url 'wearabledata-detail' wearable.id %}">{{ wearable.time }}</a></p>
      <p><strong>File: </strong><a href="{{ media_url }}{{ wearable.filename }}">{{ wearable.filename }}</a></p>
      <p><strong>Note: </strong>{{wearable.note}}</p>
      <p class='text-muted'><strong>Id: </strong>{{wearable.id}}</p>
    {% empty %}
      <hr>
      <p><em>No data.</em></p>
    {% endfor %}
  </div>

  <div style="margin-left:20px;margin-top:40px">
    <div class="titleText">
      <h4>Camera Data Session History</h4>
      {% if perms.sensors.can_alter_cameradata %}
        <button type='button' class="createNewSessionButton controlButtonXL" data-toggle="tooltip" data-placement="bottom" data-trigger="hover"
                title="Create Camera Data" onclick='window.location.href="{% url 'create_cameradata' patientdata.id %}"'>
          <i class="material-icons buttonIconS">add</i> Create New</button>
      {% endif %}
    </div>
    {% for camera in patientdata.cameras.all %}
      <hr>
      <p><strong>Session: </strong><a href="{% url 'cameradata-detail' camera.id %}">{{ camera.time }}</a></p>
      <p><strong>File: </strong><a href="{{ media_url }}{{ camera.filename }}">{{ camera.filename }}</a></p>
      <p><strong>Note: </strong>{{camera.note}}</p>
      <p class='text-muted'><strong>Id: </strong>{{camera.id}}</p>
    {% empty %}
      <hr>
      <p><em>No data.</em></p>
    {% endfor %}
  </div>
{% endblock %}